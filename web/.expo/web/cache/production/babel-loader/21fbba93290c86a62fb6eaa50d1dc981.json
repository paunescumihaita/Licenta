{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var React=_interopRequireWildcard(require(\"react\"));var _invariant=_interopRequireDefault(require(\"../utils/invariant\"));var _ThemeContext=_interopRequireDefault(require(\"../views/ThemeContext\"));var _NavigationFocusEvents=_interopRequireDefault(require(\"../views/NavigationFocusEvents\"));function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function createNavigator(NavigatorView,router,navigationConfig){var Navigator=function(_React$Component){(0,_inherits2.default)(Navigator,_React$Component);var _super=_createSuper(Navigator);function Navigator(props,context){var _this;(0,_classCallCheck2.default)(this,Navigator);_this=_super.call(this,props,context);_this.state={descriptors:{},screenProps:_this.props.screenProps,theme:context,themeContext:context};return _this;}(0,_createClass2.default)(Navigator,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.context!==this.state.themeContext){this.setState({themeContext:this.context});}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(React.Fragment,null,React.createElement(_NavigationFocusEvents.default,{navigation:this.props.navigation,onEvent:function onEvent(target,type,data){var _this$state$descripto;(_this$state$descripto=_this2.state.descriptors[target])===null||_this$state$descripto===void 0?void 0:_this$state$descripto.navigation.emit(type,data);}}),React.createElement(NavigatorView,_extends({},this.props,{screenProps:this.state.screenProps,navigation:this.props.navigation,navigationConfig:navigationConfig,descriptors:this.state.descriptors})));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,currentState){var prevDescriptors=currentState.descriptors;var navigation=nextProps.navigation,screenProps=nextProps.screenProps;(0,_invariant.default)(navigation!=null,'The navigation prop is missing for this navigator. In react-navigation v3 and v4 you must set up your app container directly. More info: https://reactnavigation.org/docs/en/app-containers.html');var state=navigation.state;var routes=state.routes;if(typeof routes==='undefined'){throw new TypeError('No \"routes\" found in navigation state. Did you try to pass the navigation prop of a React component to a Navigator child? See https://reactnavigation.org/docs/en/custom-navigators.html#navigator-navigation-prop');}var descriptors=routes.reduce(function(descriptors,route){if(prevDescriptors&&prevDescriptors[route.key]&&route===prevDescriptors[route.key].state&&screenProps===currentState.screenProps&&currentState.themeContext===currentState.theme){descriptors[route.key]=prevDescriptors[route.key];return descriptors;}var getComponent=router.getComponentForRouteName.bind(null,route.routeName);var childNavigation=navigation.getChildNavigation(route.key);var options=router.getScreenOptions(childNavigation,screenProps,currentState.themeContext);descriptors[route.key]={key:route.key,getComponent:getComponent,options:options,state:route,navigation:childNavigation};return descriptors;},{});return{descriptors:descriptors,screenProps:screenProps,theme:state.themeContext};}}]);return Navigator;}(React.Component);_defineProperty(Navigator,\"contextType\",_ThemeContext.default);_defineProperty(Navigator,\"router\",router);_defineProperty(Navigator,\"navigationOptions\",navigationConfig.navigationOptions);return Navigator;}var _default=createNavigator;exports.default=_default;","map":{"version":3,"sources":["createNavigator.js"],"names":["React","navigationConfig","constructor","descriptors","screenProps","theme","themeContext","context","prevDescriptors","currentState","invariant","navigation","state","routes","route","getComponent","router","childNavigation","options","key","componentDidUpdate","render"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport invariant from '../utils/invariant';\nimport ThemeContext from '../views/ThemeContext';\nimport NavigationFocusEvents from '../views/NavigationFocusEvents';\n\nfunction createNavigator(NavigatorView, router, navigationConfig) {\n  class Navigator extends React.Component {\n    // eslint-disable-next-line react/sort-comp\n    static contextType = ThemeContext;\n    static router = router;\n    static navigationOptions = navigationConfig.navigationOptions;\n\n    constructor(props, context) {\n      super(props, context);\n\n      this.state = {\n        descriptors: {},\n        screenProps: this.props.screenProps,\n        theme: context,\n        themeContext: context,\n      };\n    }\n\n    static getDerivedStateFromProps(nextProps, currentState) {\n      const prevDescriptors = currentState.descriptors;\n      const { navigation, screenProps } = nextProps;\n      invariant(\n        navigation != null,\n        'The navigation prop is missing for this navigator. In react-navigation v3 and v4 you must set up your app container directly. More info: https://reactnavigation.org/docs/en/app-containers.html'\n      );\n      const { state } = navigation;\n      const { routes } = state;\n      if (typeof routes === 'undefined') {\n        throw new TypeError(\n          'No \"routes\" found in navigation state. Did you try to pass the navigation prop of a React component to a Navigator child? See https://reactnavigation.org/docs/en/custom-navigators.html#navigator-navigation-prop'\n        );\n      }\n\n      const descriptors = routes.reduce((descriptors, route) => {\n        if (\n          prevDescriptors &&\n          prevDescriptors[route.key] &&\n          route === prevDescriptors[route.key].state &&\n          screenProps === currentState.screenProps &&\n          currentState.themeContext === currentState.theme\n        ) {\n          descriptors[route.key] = prevDescriptors[route.key];\n          return descriptors;\n        }\n        const getComponent = router.getComponentForRouteName.bind(\n          null,\n          route.routeName\n        );\n        const childNavigation = navigation.getChildNavigation(route.key);\n        const options = router.getScreenOptions(\n          childNavigation,\n          screenProps,\n          currentState.themeContext\n        );\n        descriptors[route.key] = {\n          key: route.key,\n          getComponent,\n          options,\n          state: route,\n          navigation: childNavigation,\n        };\n        return descriptors;\n      }, {});\n\n      return { descriptors, screenProps, theme: state.themeContext };\n    }\n\n    componentDidUpdate() {\n      if (this.context !== this.state.themeContext) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({ themeContext: this.context });\n      }\n    }\n\n    render() {\n      return (\n        <React.Fragment>\n          <NavigationFocusEvents\n            navigation={this.props.navigation}\n            onEvent={(target, type, data) => {\n              this.state.descriptors[target]?.navigation.emit(type, data);\n            }}\n          />\n          <NavigatorView\n            {...this.props}\n            screenProps={this.state.screenProps}\n            navigation={this.props.navigation}\n            navigationConfig={navigationConfig}\n            descriptors={this.state.descriptors}\n          />\n        </React.Fragment>\n      );\n    }\n  }\n\n  return Navigator;\n}\n\nexport default createNavigator;\n"]},"metadata":{},"sourceType":"script"}