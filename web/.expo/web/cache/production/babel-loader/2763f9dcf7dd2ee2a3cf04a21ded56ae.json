{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var React=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var _default=function _default(Navigator,navigatorConfig){var _class,_temp;return _temp=_class=function(_React$Component){(0,_inherits2.default)(KeyboardAwareNavigator,_React$Component);var _super=_createSuper(KeyboardAwareNavigator);function KeyboardAwareNavigator(){var _this;(0,_classCallCheck2.default)(this,KeyboardAwareNavigator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_defineProperty((0,_assertThisInitialized2.default)(_this),\"_previouslyFocusedTextInput\",null);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_handleGestureBegin\",function(){_this._previouslyFocusedTextInput=_reactNative.TextInput.State.currentlyFocusedInput?_reactNative.TextInput.State.currentlyFocusedInput():_reactNative.TextInput.State.currentlyFocusedField();if(_this._previouslyFocusedTextInput){_reactNative.TextInput.State.blurTextInput(_this._previouslyFocusedTextInput);}_this.props.onGestureBegin&&_this.props.onGestureBegin();});_defineProperty((0,_assertThisInitialized2.default)(_this),\"_handleGestureCanceled\",function(){if(_this._previouslyFocusedTextInput){_reactNative.TextInput.State.focusTextInput(_this._previouslyFocusedTextInput);}_this.props.onGestureCanceled&&_this.props.onGestureCanceled();});_defineProperty((0,_assertThisInitialized2.default)(_this),\"_handleGestureEnd\",function(){_this._previouslyFocusedTextInput=null;_this.props.onGestureFinish&&_this.props.onGestureFinish();});_defineProperty((0,_assertThisInitialized2.default)(_this),\"_handleTransitionStart\",function(transitionProps,prevTransitionProps){if(transitionProps.index!==prevTransitionProps.index){var currentField=_reactNative.TextInput.State.currentlyFocusedInput?_reactNative.TextInput.State.currentlyFocusedInput():_reactNative.TextInput.State.currentlyFocusedField();if(currentField){_reactNative.TextInput.State.blurTextInput(currentField);}}var onTransitionStart=_this.props.onTransitionStart||navigatorConfig.onTransitionStart;onTransitionStart&&onTransitionStart(transitionProps,prevTransitionProps);});return _this;}(0,_createClass2.default)(KeyboardAwareNavigator,[{key:\"render\",value:function render(){return React.createElement(Navigator,_extends({},this.props,{onGestureBegin:this._handleGestureBegin,onGestureCanceled:this._handleGestureCanceled,onGestureEnd:this._handleGestureEnd,onTransitionStart:this._handleTransitionStart}));}}]);return KeyboardAwareNavigator;}(React.Component),_defineProperty(_class,\"router\",Navigator.router),_defineProperty(_class,\"navigationOptions\",Navigator.navigationOptions),_temp;};exports.default=_default;","map":{"version":3,"sources":["createKeyboardAwareNavigator.js"],"names":["React","Navigator","TextInput","transitionProps","prevTransitionProps","currentField","onTransitionStart","navigatorConfig","render","_handleTransitionStart"],"mappings":"8zBAAA,oDACA,yC,krCAEe,kBAAA,SAAA,CAAA,eAAA,CAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,4IACwC,iCAAA,mGAAA,IAAA,0CAAA,IAAA,wBAAA,6CAAA,IAAA,GAAA,eAAA,4CAAA,6BAAA,CAAA,IAAA,CAAA,CAAA,eAAA,4CAAA,qBAAA,CAK7B,UAAM,CAC1B,MAAA,2BAAA,CAAmCE,uBAAAA,KAAAA,CAAAA,qBAAAA,CAC/BA,uBAAAA,KAAAA,CAD+BA,qBAC/BA,EAD+BA,CAE/BA,uBAAAA,KAAAA,CAFJ,qBAEIA,EAFJ,CAGA,GAAI,MAAJ,2BAAA,CAAsC,CACpCA,uBAAAA,KAAAA,CAAAA,aAAAA,CAA8B,MAA9BA,2BAAAA,EACD,CACD,MAAA,KAAA,CAAA,cAAA,EAA6B,MAAA,KAAA,CAA7B,cAA6B,EAA7B,CAZiD,CAAA,CAAA,CAAA,eAAA,4CAAA,wBAAA,CAe1B,UAAM,CAC7B,GAAI,MAAJ,2BAAA,CAAsC,CACpCA,uBAAAA,KAAAA,CAAAA,cAAAA,CAA+B,MAA/BA,2BAAAA,EACD,CACD,MAAA,KAAA,CAAA,iBAAA,EAAgC,MAAA,KAAA,CAAhC,iBAAgC,EAAhC,CAnBiD,CAAA,CAAA,CAAA,eAAA,4CAAA,mBAAA,CAsB/B,UAAM,CACxB,MAAA,2BAAA,CAAA,IAAA,CACA,MAAA,KAAA,CAAA,eAAA,EAA8B,MAAA,KAAA,CAA9B,eAA8B,EAA9B,CAxBiD,CAAA,CAAA,CAAA,eAAA,4CAAA,wBAAA,CA2B1B,SAAA,eAAA,CAAA,mBAAA,CAA0C,CAIjE,GAAIC,eAAe,CAAfA,KAAAA,GAA0BC,mBAAmB,CAAjD,KAAA,CAAyD,CACvD,GAAMC,CAAAA,YAAY,CAAGH,uBAAAA,KAAAA,CAAAA,qBAAAA,CACjBA,uBAAAA,KAAAA,CADiBA,qBACjBA,EADiBA,CAEjBA,uBAAAA,KAAAA,CAFJ,qBAEIA,EAFJ,CAGA,GAAA,YAAA,CAAkB,CAChBA,uBAAAA,KAAAA,CAAAA,aAAAA,CAAAA,YAAAA,EACD,CACF,CAED,GAAMI,CAAAA,iBAAiB,CACrB,MAAA,KAAA,CAAA,iBAAA,EAAgCC,eAAe,CADjD,iBAAA,CAEAD,iBAAiB,EACfA,iBAAiB,CAAA,eAAA,CADnBA,mBACmB,CADnBA,CA1CiD,CAAA,CAAA,CAAA,aAAA,CADxC,sEA+CXE,iBAAS,CACP,MACE,CAAA,KAAA,CAAA,aAAA,CAAA,SAAA,CAAA,QAAA,CAAA,EAAA,CACM,KADN,KAAA,CAAA,CAEE,cAAc,CAAE,KAFlB,mBAAA,CAGE,iBAAiB,CAAE,KAHrB,sBAAA,CAIE,YAAY,CAAE,KAJhB,iBAAA,CAKE,iBAAiB,CAAE,KAAKC,sBAL1B,CAAA,CAAA,CADF,CASD,CAzDU,oCACwBT,KAAK,CAA1C,SADa,CAAA,CAAA,eAAA,CAAA,MAAA,CAAA,QAAA,CAEKC,SAAS,CAFd,MAAA,CAAA,CAAA,eAAA,CAAA,MAAA,CAAA,mBAAA,CAGgBA,SAAS,CAHzB,iBAAA,CAAA,CAAA,KAAA,CAAf,C","sourcesContent":["import * as React from 'react';\nimport { TextInput } from 'react-native';\n\nexport default (Navigator, navigatorConfig) =>\n  class KeyboardAwareNavigator extends React.Component {\n    static router = Navigator.router;\n    static navigationOptions = Navigator.navigationOptions;\n    _previouslyFocusedTextInput = null;\n\n    _handleGestureBegin = () => {\n      this._previouslyFocusedTextInput = TextInput.State.currentlyFocusedInput\n        ? TextInput.State.currentlyFocusedInput()\n        : TextInput.State.currentlyFocusedField();\n      if (this._previouslyFocusedTextInput) {\n        TextInput.State.blurTextInput(this._previouslyFocusedTextInput);\n      }\n      this.props.onGestureBegin && this.props.onGestureBegin();\n    };\n\n    _handleGestureCanceled = () => {\n      if (this._previouslyFocusedTextInput) {\n        TextInput.State.focusTextInput(this._previouslyFocusedTextInput);\n      }\n      this.props.onGestureCanceled && this.props.onGestureCanceled();\n    };\n\n    _handleGestureEnd = () => {\n      this._previouslyFocusedTextInput = null;\n      this.props.onGestureFinish && this.props.onGestureFinish();\n    };\n\n    _handleTransitionStart = (transitionProps, prevTransitionProps) => {\n      // TODO: We should not even have received the transition start event\n      // in the case where the index did not change, I believe. We\n      // should revisit this after 2.0 release.\n      if (transitionProps.index !== prevTransitionProps.index) {\n        const currentField = TextInput.State.currentlyFocusedInput\n          ? TextInput.State.currentlyFocusedInput()\n          : TextInput.State.currentlyFocusedField();\n        if (currentField) {\n          TextInput.State.blurTextInput(currentField);\n        }\n      }\n\n      const onTransitionStart =\n        this.props.onTransitionStart || navigatorConfig.onTransitionStart;\n      onTransitionStart &&\n        onTransitionStart(transitionProps, prevTransitionProps);\n    };\n\n    render() {\n      return (\n        <Navigator\n          {...this.props}\n          onGestureBegin={this._handleGestureBegin}\n          onGestureCanceled={this._handleGestureCanceled}\n          onGestureEnd={this._handleGestureEnd}\n          onTransitionStart={this._handleTransitionStart}\n        />\n      );\n    }\n  };\n"]},"metadata":{},"sourceType":"script"}