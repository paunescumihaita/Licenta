{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var React=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _core=require(\"@react-navigation/core\");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var FAR_FAR_AWAY=3000;var ResourceSavingSceneView=function(_React$PureComponent){(0,_inherits2.default)(ResourceSavingSceneView,_React$PureComponent);var _super=_createSuper(ResourceSavingSceneView);function ResourceSavingSceneView(props){var _this;(0,_classCallCheck2.default)(this,ResourceSavingSceneView);_this=_super.call(this);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_mustAlwaysBeVisible\",function(){return _this.props.animationEnabled||_this.props.swipeEnabled;});_this.state={awake:props.lazy?props.isFocused:true};return _this;}(0,_createClass2.default)(ResourceSavingSceneView,[{key:\"render\",value:function render(){var awake=this.state.awake;var _this$props=this.props,isFocused=_this$props.isFocused,childNavigation=_this$props.childNavigation,removeClippedSubviews=_this$props.removeClippedSubviews,rest=(0,_objectWithoutProperties2.default)(_this$props,[\"isFocused\",\"childNavigation\",\"removeClippedSubviews\"]);return React.createElement(_reactNative.View,{style:styles.container,collapsable:false,removeClippedSubviews:_reactNative.Platform.OS==='android'?removeClippedSubviews:!isFocused&&removeClippedSubviews},React.createElement(_reactNative.View,{style:this._mustAlwaysBeVisible()||isFocused?styles.innerAttached:styles.innerDetached},awake?React.createElement(_core.SceneView,_extends({},rest,{navigation:childNavigation})):null));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.isFocused&&!prevState.awake){return{awake:true};}else{return null;}}}]);return ResourceSavingSceneView;}(React.PureComponent);var styles=_reactNative.StyleSheet.create({container:{flex:1,overflow:'hidden'},innerAttached:{flex:1},innerDetached:{flex:1,top:FAR_FAR_AWAY}});var _default=ResourceSavingSceneView;exports.default=_default;","map":{"version":3,"sources":["ResourceSavingSceneView.js"],"names":["FAR_FAR_AWAY","React","nextProps","prevState","awake","constructor","props","render","rest","styles","Platform","removeClippedSubviews","innerDetached","childNavigation","container","flex","overflow","innerAttached","top"],"mappings":"86BAAA,oDACA,yCACA,4C,qqCAEA,GAAMA,CAAAA,YAAY,CAAlB,IAAA,C,GAEA,CAAA,uB,sJASEK,iCAAW,KAAXA,CAAmB,sEACjB,wBADiB,eAAA,4CAAA,sBAAA,CAQI,UAAM,CAC3B,MAAO,OAAA,KAAA,CAAA,gBAAA,EAA+B,MAAA,KAAA,CAAtC,YAAA,CATiB,CAAA,CAAA,CAGjB,MAAA,KAAA,CAAa,CACXD,KAAK,CAAEE,KAAK,CAALA,IAAAA,CAAaA,KAAK,CAAlBA,SAAAA,CAA+B,IAD3B,CAAb,CAHiB,aAMlB,C,uEAMDC,iBAAS,IACCH,CAAAA,KADD,CACW,KAAlB,KADO,CACCA,KADD,iBAOH,KALJ,KAFO,CAED,SAFC,aAED,SAFC,CAED,eAFC,aAED,eAFC,CAED,qBAFC,aAED,qBAFC,CAMFI,IANE,4GASP,MACE,CAAA,KAAA,CAAA,aAAA,CAAA,iBAAA,CAAA,CACE,KAAK,CAAEC,MAAM,CADf,SAAA,CAEE,WAAW,CAFb,KAAA,CAGE,qBAAqB,CACnBC,sBAAAA,EAAAA,GAAAA,SAAAA,CAAAA,qBAAAA,CAEI,CAAA,SAAA,EAAcC,qBANtB,CAAA,CASE,KAAA,CAAA,aAAA,CAAA,iBAAA,CAAA,CACE,KAAK,CACH,KAAA,oBAAA,IAAA,SAAA,CACIF,MAAM,CADV,aAAA,CAEIA,MAAM,CAACG,aAJf,CAAA,CAOGR,KAAK,CAAG,KAAA,CAAA,aAAA,CAAA,eAAA,CAAA,QAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAqB,UAAU,CAAES,eAAjC,CAAA,CAAA,CAAH,CAjBZ,IAUI,CATF,CADF,CAqBD,C,0CAlDD,kCAAA,SAAA,CAAA,SAAA,CAAsD,CACpD,GAAIX,SAAS,CAATA,SAAAA,EAAuB,CAACC,SAAS,CAArC,KAAA,CAA6C,CAC3C,MAAO,CAAEC,KAAK,CAAE,IAAT,CAAP,CADF,CAAA,IAEO,CACL,MAAA,KAAA,CACD,CACF,C,qCAPmCH,KAAK,CAA3C,a,EAsDA,GAAMQ,CAAAA,MAAM,CAAG,wBAAA,MAAA,CAAkB,CAC/BK,SAAS,CAAE,CACTC,IAAI,CADK,CAAA,CAETC,QAAQ,CAAE,QAFD,CADoB,CAK/BC,aAAa,CAAE,CACbF,IAAI,CAAE,CADO,CALgB,CAQ/BH,aAAa,CAAE,CACbG,IAAI,CADS,CAAA,CAEbG,GAAG,CAAElB,YAFQ,CARgB,CAAlB,CAAf,C,aAcA,uB","sourcesContent":["import * as React from 'react';\nimport { Platform, StyleSheet, View } from 'react-native';\nimport { SceneView } from '@react-navigation/core';\n\nconst FAR_FAR_AWAY = 3000; // this should be big enough to move the whole view out of its container\n\nclass ResourceSavingSceneView extends React.PureComponent {\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.isFocused && !prevState.awake) {\n      return { awake: true };\n    } else {\n      return null;\n    }\n  }\n\n  constructor(props) {\n    super();\n\n    this.state = {\n      awake: props.lazy ? props.isFocused : true,\n    };\n  }\n\n  _mustAlwaysBeVisible = () => {\n    return this.props.animationEnabled || this.props.swipeEnabled;\n  };\n\n  render() {\n    const { awake } = this.state;\n    const {\n      isFocused,\n      childNavigation,\n      removeClippedSubviews,\n      ...rest\n    } = this.props;\n\n    return (\n      <View\n        style={styles.container}\n        collapsable={false}\n        removeClippedSubviews={\n          Platform.OS === 'android'\n            ? removeClippedSubviews\n            : !isFocused && removeClippedSubviews\n        }\n      >\n        <View\n          style={\n            this._mustAlwaysBeVisible() || isFocused\n              ? styles.innerAttached\n              : styles.innerDetached\n          }\n        >\n          {awake ? <SceneView {...rest} navigation={childNavigation} /> : null}\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  innerAttached: {\n    flex: 1,\n  },\n  innerDetached: {\n    flex: 1,\n    top: FAR_FAR_AWAY,\n  },\n});\n\nexport default ResourceSavingSceneView;\n"]},"metadata":{},"sourceType":"script"}