{"version":3,"file":"Xcode.js","sourceRoot":"","sources":["../src/Xcode.ts"],"names":[],"mappings":";;;;;AAAA,oEAA2C;AAE3C,yCAAoC;AAEpC,mCAAmC;AACtB,QAAA,cAAc,GAAG,GAAG,CAAC;AACrB,QAAA,UAAU,GAAG,WAAW,CAAC;AAE/B,KAAK,UAAU,oBAAoB;IACxC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,qBAAU,CAAC,YAAY,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;QAEhE,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;QAChD,IAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,MAAM,EAAE;YACjB,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;YACzB,6BAA6B;YAC7B,IAAI,IAAI,EAAE;gBACR,OAAO,GAAG,IAAI,IAAI,CAAC;aACpB;YACD,OAAO,IAAI,CAAC;SACb;QAED,2BAA2B;QAC3B,iBAAM,CAAC,MAAM,CAAC,KAAK,CACjB,0FAA0F,CAC3F,CAAC;KACH;IAAC,WAAM;QACN,gBAAgB;KACjB;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAtBD,oDAsBC;AAED;;;;GAIG;AACI,KAAK,UAAU,iBAAiB,CAAC,KAAa;IACnD,MAAM,IAAI,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;IACpC,MAAM,qBAAU,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;AACnC,CAAC;AAHD,8CAGC;AAED,SAAS,eAAe,CAAC,KAAa;IACpC,IAAI,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;QACjC,2EAA2E;QAC3E,OAAO,wCAAwC,KAAK,EAAE,CAAC;KACxD;IACD,OAAO,mCAAmC,KAAK,EAAE,CAAC;AACpD,CAAC","sourcesContent":["import spawnAsync from '@expo/spawn-async';\n\nimport { Logger } from './internal';\n\n// Based on the RN docs (Aug 2020).\nexport const minimumVersion = 9.4;\nexport const appStoreId = '497799835';\n\nexport async function getXcodeVersionAsync(): Promise<string | null> {\n  try {\n    const { stdout } = await spawnAsync('xcodebuild', ['-version']);\n\n    const match = stdout.match(/^Xcode (\\d+\\.\\d+)/);\n    if (match?.length) {\n      const last = match.pop();\n      // Convert to a semver string\n      if (last) {\n        return `${last}.0`;\n      }\n      return null;\n    }\n\n    // not sure what's going on\n    Logger.global.error(\n      'Unable to check Xcode version. Command ran successfully but no version number was found.'\n    );\n  } catch {\n    // not installed\n  }\n  return null;\n}\n\n/**\n * Open a link to the App Store. Just link in mobile apps, **never** redirect without prompting first.\n *\n * @param appId\n */\nexport async function openAppStoreAsync(appId: string): Promise<void> {\n  const link = getAppStoreLink(appId);\n  await spawnAsync('open', [link]);\n}\n\nfunction getAppStoreLink(appId: string): string {\n  if (process.platform === 'darwin') {\n    // TODO: Is there ever a case where the macappstore isn't available on mac?\n    return `macappstore://itunes.apple.com/app/id${appId}`;\n  }\n  return `https://apps.apple.com/us/app/id${appId}`;\n}\n"]}