{"version":3,"file":"IosWorkspace.js","sourceRoot":"","sources":["../../src/detach/IosWorkspace.ts"],"names":[],"mappings":";;;;;AAAA,gDAAwB;AAExB;;;;;;;;;GASG;AACH,SAAS,QAAQ,CAAC,OAAY;IAC5B,IAAI,mBAAmB,CAAC;IACxB,IAAI,WAAW,CAAC;IAChB,IAAI,mBAAmB,CAAC;IACxB,IAAI,oBAAoB,CAAC;IAEzB,IAAI,OAAO,CAAC,KAAK,CAAC,iBAAiB,EAAE,EAAE;QACrC,WAAW,GAAG,UAAU,CAAC;KAC1B;SAAM,IAAI,OAAO,CAAC,WAAW,EAAE,EAAE;QAChC,WAAW,GAAG,YAAY,CAAC;KAC5B;SAAM,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE;QAChD,MAAM,gBAAgB,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;QAC7C,WAAW,GAAG,gBAAgB,CAAC,OAAO,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;KAC5E;SAAM;QACL,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;KACnE;IACD,IAAI,OAAO,CAAC,IAAI,KAAK,MAAM,EAAE;QAC3B,oBAAoB,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC;QAChD,mBAAmB,GAAG,cAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QACjE,mBAAmB,GAAG,cAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;KACjF;SAAM,IAAI,OAAO,CAAC,IAAI,KAAK,SAAS,EAAE;QACrC,oBAAoB,GAAG,cAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAC3E,mBAAmB,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC;QAC5D,IAAI,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;YAC5B,uCAAuC;YACvC,mBAAmB,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC;SAChD;aAAM;YACL,mBAAmB,GAAG,cAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;SACjF;KACF;SAAM;QACL,MAAM,IAAI,KAAK,CAAC,uCAAuC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;KACxE;IACD,8EAA8E;IAC9E,8CAA8C;IAC9C,MAAM,sBAAsB,GAAG,cAAI,CAAC,IAAI,CACtC,mBAAmB,EACnB,OAAO,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,sBAAsB,CACrF,CAAC;IACF,OAAO;QACL,oBAAoB;QACpB,sBAAsB;QACtB,mBAAmB;QACnB,WAAW;QACX,mBAAmB;KACpB,CAAC;AACJ,CAAC;AAEQ,4BAAQ","sourcesContent":["import path from 'path';\n\n/**\n *  paths returned:\n *    iosProjectDirectory - root directory of an (uncompiled) xcworkspace and obj-c source tree\n *    projectName - xcworkspace project name normalized from context.config\n *    supportingDirectory - location of Info.plist, xib files, etc. during configuration.\n *      for an unbuilt app this is underneath iosProjectDirectory. for a compiled app it's just\n *      a path to the flat xcarchive.\n *    intermediatesDirectory - temporary spot to write whatever files are needed during the\n *      detach/build process but can be discarded afterward.\n */\nfunction getPaths(context: any) {\n  let iosProjectDirectory;\n  let projectName;\n  let supportingDirectory;\n  let projectRootDirectory;\n\n  if (context.build.isExpoClientBuild()) {\n    projectName = 'Exponent';\n  } else if (context.isAnonymous()) {\n    projectName = 'ExpoKitApp';\n  } else if (context.config && context.config.name) {\n    const projectNameLabel = context.config.name;\n    projectName = projectNameLabel.replace(/[^a-z0-9_-]/gi, '-').toLowerCase();\n  } else {\n    throw new Error('Cannot configure an Expo project with no name.');\n  }\n  if (context.type === 'user') {\n    projectRootDirectory = context.data.projectPath;\n    iosProjectDirectory = path.join(context.data.projectPath, 'ios');\n    supportingDirectory = path.join(iosProjectDirectory, projectName, 'Supporting');\n  } else if (context.type === 'service') {\n    projectRootDirectory = path.dirname(context.build.ios.workspaceSourcePath);\n    iosProjectDirectory = context.build.ios.workspaceSourcePath;\n    if (context.data.archivePath) {\n      // compiled archive has a flat NSBundle\n      supportingDirectory = context.data.archivePath;\n    } else {\n      supportingDirectory = path.join(iosProjectDirectory, projectName, 'Supporting');\n    }\n  } else {\n    throw new Error(`Unsupported StandaloneContext type: ${context.type}`);\n  }\n  // sandbox intermediates directory by workspace so that concurrently operating\n  // contexts do not interfere with one another.\n  const intermediatesDirectory = path.join(\n    iosProjectDirectory,\n    context.build.isExpoClientBuild() ? 'ExponentIntermediates' : 'ExpoKitIntermediates'\n  );\n  return {\n    projectRootDirectory,\n    intermediatesDirectory,\n    iosProjectDirectory,\n    projectName,\n    supportingDirectory,\n  };\n}\n\nexport { getPaths };\n"]}